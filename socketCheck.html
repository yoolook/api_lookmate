<html>

<head>
    <title>Socket.io</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function () {
            //var socket = io();
            var socket = io.connect('http://localhost:3000', {
                query: { token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2luZm8iOnsidXNlcl9pZCI6MjMsIm5pY2tfbmFtZSI6bnVsbCwiZW1haWwiOiJsb29rbWF0ZUBnbWFpbC5jb20iLCJwYXNzd29yZCI6IiQyYSQxMCRjMDNMTmxVM1ZGRWx1WGtqSmlEUUlPeUJQZlJMWTFWcXJ5NVNVS29SbUdPODVkQ2UyVHBZUyIsInBob25lIjpudWxsLCJvdHAiOjk1NTMxNSwidmVyaWZpZWQiOmZhbHNlLCJiaXJ0aF95ZWFyX3JhbmdlIjpudWxsLCJsYXN0UHJvZmlsZVBpY0lkIjpudWxsLCJnZW5kZXIiOm51bGwsImZpcnN0X3RpbWVfdXNlciI6dHJ1ZSwiY3JlYXRlZEF0IjoiMjAxOS0wOC0xNVQxNjoyNjozNy4wMDBaIiwidXBkYXRlZEF0IjoiMjAxOS0wOC0xNVQxNjoyNjozNy4wMDBaIn0sImlhdCI6MTU2NTg4ODQ3NCwiZXhwIjoxNTY1OTc0ODc0fQ.BwImJgzs_cEpJVtCEGOHi9tqlnO52SPlhFsCDWd_3qE" }
            });
            socket.emit('addAppearance',"add");

            /* socket.on('connect', function (socket) {
                console.log("Under Connect");
                socket.on('addAppearance', function () {
                        alert("do things here");
                    }).emit('authenticate', { token: token }); //send the jwt
            }); */

            $("#add_status").click(function () {
                console.log("Emitting the values from client: " + $("#comment").val());
                socket.emit('addAppearance', $("#comment").val());
            });
            socket.on('refreshAppearance', function (msg) {
                $("#show_comments").append(msg.success + '<br /><br />');
            });
        });
    </script>
</head>

<body>
    <div id="comment_box" style="padding:5%;">
        <textarea id="comment" rows="5" cols="70"></textarea><br /><br />
        <input type="button" id="add_status" value="Add Status">
    </div>
    <div id="show_comments" class="jumbotron" style="width: 38%;
                height: 100%;
                padding: 2%;
                margin-left:5%;
                margin-top:-53px;">
    </div>
</body>

</html>